<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta http-equiv="X-UA-Compatible" 
          content="IE=edge">

    <meta name="viewport" 
          content="width=device-width, initial-scale=1.0">

   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- 글꼴(주원 행님이 추천하신 구글 폰트 적용)-->
    <link rel="preconnect"
          href="https://fonts.googleapis.com">

    <link rel="preconnect"
          href="https://fonts.gstatic.com"
          crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Noto+Sans+KR:wght@700&display=swap" 
          rel="stylesheet">


    <!-- CSS와 연계 -->
    <link rel="stylesheet"
          href="/css/index_test.css" />

    <!-- 구글 아이콘-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" 
          rel="stylesheet">


    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
          integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" 
          crossorigin="anonymous"
          referrerpolicy="no-referrer" />

    <!-- Axios CDN(Axios를 사용하기 위함) -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <title>ChatGPT Clone</title>
</head>
<body>
    <!-- Header -->
    <header>
        <img src="assets/img/ENTR_logo.png" 
             alt="로고"
             id="header-logo">

        <a href="/mypage_test.html" 
           class="header-link">
            <h3>~님 안녕하세요!!</h3>
       </a>
    </header>
    
    <!-- Prompt Sidebar-->
    <nav id="sidebar">
        <div class="float-top">
            <!-- 팝업 레이아웃 (New Chat을 클릭할 떄 나타남)--> 
            <div id="new-chat-popup"
                 class="popup"
                 style="display: none;">

                <div class="popup-content">
                    <span class="close-btn"
                          onclick="closePopup()">&times;</span>

                    <h3>새 채팅방 생성</h3>

                    <form id="new-chat-form">
                        <label for="topic">주제:</label>
                        <input type="text" 
                               id="topic"
                               name="topic"><br>

                        <label for="chatroom-name">채팅방명:</label>
                        <input type="text"
                               id="chatroom-name"
                               name="chatroom"><br>

                        <div id="error-message" 
                             style="display: none; color: red; margin:10px;">
                        </div>   <!-- 오류 메시지를 위한 요소 추가 -->

                        <button type="submit"
                                onclick='generateChat(event)'>생성</button>
                    </form>
                </div>
            </div>

            <!-- 다른 요소들 사이에 높이 간격을 주기 위한 빈 div -->
            <div style="height: 30px;"></div>
            
            <!-- New Chat -->
            <div class="sidebar-controls">
                <button class="new-chat"
                        style='color:black'
                        onclick="openPopup()">
                        <i class="fa fa-plus" style="margin-right: 10px;"></i>
                        <span>New Chat</span>
                </button>
                <!-- <button class="hide-sidebar"><i class="fa fa-chevron-left"></i></button> -->
            </div>
           
            <!-- 다른 요소들 사이에 높이 간격을 주기 위한 빈 div -->
            <div style="height: 30px;"></div>

            <!-- 채팅방명-->
            <p class='topic'  
               style="color: black; font-weight: bold;">채팅방명</p>
            <ul class="conversations"> <!-- 채팅방명 목록 -->
                <!-- 채팅방 목록이 JS 코드로 동적으로 생성됩니다.-->
            </ul>
        </div>

        <!-- User Menu-->
        <div class="user-menu"
             style='margin-bottom:120px;'>
            <!-- 엔터란? -->
            <div class="menu1"
                 style='padding:10px;'
                 onclick='question_enter();'>
                <span>엔터란?</span>
            </div>

            <!-- AI 설정 -->
            <div class="menu2"
                 style='padding:10px;'
                 onclick='toggleModal()'>
                <span>AI 설정</span>
            </div>

            <!-- 문의 게시판 -->
            <div class="menu3"
                 style='padding:10px;'
                 onclick='goInquiry();'>
                
                <span>문의 게시판</span>
            </div>

            <!-- 로그인/로그아웃 -->
            <div class="menu4"
                style='padding:10px;'
                onclick='goLogout();'>
               <span>로그아웃</span>
            </div>
        </div>
    </nav>
 
    <!-- Prompt Main 화면 -->
    <main>
        <div class="view new-chat-view">  <!-- 상단 -->
            <div class="logo">
                Enter
            </div>
            
        </div>

        <div class="view conversation-view"
             style="flex-grow: 1; height: auto; overflow-y: auto; margin: 10px; padding:40px;">   <!-- 중간 -->
            <!-- 질문과 대답의 반복 (History) 동적 데이터-->
        </div>
 
        <div id="message-form"
             style='display:none; margin-bottom:30px;'>                <!-- 하단 입력창 -->
            <div class="message-wrapper">
                <textarea id="message"
                          rows="1"
                          placeholder="Send a message"></textarea>
                <button class="send-button">
                    <i class="fa fa-paper-plane"></i>
                </button>
            </div>

            <div class="disclaimer">This is a ENTER UI for personal use and educational purposes only.</div>
        </div>
    </main>

    <!-- 기타 -->

    <!-- 'AI 설정'을 click하면 나타나는 모달 -->
    <div id="myModal"
         class="modal"
         style='display:none'>
        <!-- 모달 내용 -->
        <div class="modal-content">
            <span class="close"
                    onclick='toggleModal()'>&times;</span>

            <h2>AI 설정</h2>

            <div style='height:20px'></div>

            <div class="modal-body">
                <!-- SideBar-->
                <div class="sidebar-area">
                    <!-- 크롤러 설정 섹션 -->
                    <div class="section" 
                         style='margin-bottom:50px; display: flex; align-items: center; cursor: pointer;'
                         onclick="handleCrawlerClick()">
                        <!-- <img src="assets/img/web-crawler.png" 
                             alt="크롤러 설정" 
                             style="width: 25px; height: 25px; margin-right: 10px;"> -->
                        <p style='font-size:15px; margin: 0;'>크롤러 설정</p>
                    </div>

                    <!-- 템플릿 섹션 -->
                    <div class="section" 
                         style='margin-bottom:50px; display: flex; align-items: center; cursor: pointer;'
                         onclick="handleTemplateClick()">
                        <!-- <img src="assets/img/template.png" 
                             alt="템플릿" 
                             style="width: 25px; height: 25px; margin-right: 10px;"> -->
                        <p style='font-size:15px; margin: 0;'>템플릿</p>
                    </div>

                    <!-- 자주 쓰는 문구 섹션 -->
                    <div class="section" 
                         style='margin-bottom:50px; display: flex; align-items: center; cursor: pointer;'
                         onclick='handleUseClick()'>
                        <!-- <img src="assets/img/template.png" 
                             alt="자주 쓰는 문구" 
                             style="width: 25px; height: 25px; margin-right: 10px;"> -->
                        <p style='font-size:15px; margin: 0;'>자주 쓰는 문구</p>
                    </div>
                </div>

                <!-- Content -->
                <div class="content-area">
                    <!-- '크롤러 설정 click 했을 떄 나옴(일단 class 이름을 popup1-content로 표현)'-->

                    <!-- '템플릿 click 했을 떄 나옴(일단 class 이름을 popup2-content로 표현)'-->

                    <!-- '자주 쓰는 문구 click 했을 떄 나옴'-->
                    <div class="popup3-content"
                         style='display:none'>
                        <!-- 동적으로 사용자의 자주 쓰는 문구 가져오기 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- context 메뉴 -->
    <div id="contextMenu"
         class="context-menu"
         style="display:none;">
        <ul>
            <li onClick="">크롤러 설정</li>
            <li onclick="modify()">수정</li>
            <li onclick="deleteChatRoom()">삭제</li>
        </ul>
    </div>

    <!-- 채팅방명 수정 팝업 (채팅방명을 수정하려 할 떄 나타남)--> 
    <div id="update-popup"
          class="popup"
          style="display: none;">

        <div class="popup-content">
            <span class="close-btn"
                onclick="closePopup()">&times;</span>
            <h3>채팅방명 변경 </h3>

            <form id="update-chat-form">
                <label for="chatroom-name">채팅방명:</label>
                <input type="text"
                    id="chatroom-name"
                    name="chatroom"><br>

                <div id="error-message" 
                    style="display: none; color: red; margin:10px;">
                </div>   <!-- 오류 메시지를 위한 요소 추가 -->

                <button type="submit"
                        onclick='editChatRoom()'>변경</button>
            </form>
        </div>
    </div>

    <!-- 자주 쓰는 문구를 추가하려고 할 떄 등장하는 팝업 -->
    <div id="addFrequentMessagePopup" 
         style="display:none;">
        <div class="popup-content">
            <h2>자주 쓰는 문구 추가</h2>

            <label for="messageTitle">문구 제목:</label>
            <input type="text"
                   id="messageTitle"
                   name="messageTitle">
    
            <label for="messageContent">문구 내용:</label>
            <textarea id="messageContent" 
                     name="messageContent"></textarea>

            <div id="errorMessage"
                 style="display: none; color: red; margin-top: 10px;">
                 여기에 오류 메시지가 표시됩니다.
            </div>

            <div class="button-container"
                 style='display: flex; flex-direction: row; justify-content: center; gap: 10px;'>
                <button onclick="submitFrequentMessage()">추가</button>
                <button onclick="closeFrequentMessage()">취소</button>
            </div>
        </div>
    </div>

    <!-- 자주 쓰는 문구를 수정할 때 등장하는 팝업 -->
    <div id="editFrequentMessagePopup"
         style="display:none;">
        <div class="popup-content">
            <h2>자주 쓰는 문구 수정</h2>

            <label for="editMessageTitle">문구 제목:</label>
            <input type="text" 
                   id="editMessageTitle"
                   name="editMessageTitle">

            <label for="editMessageContent">문구 내용:</label>
            <textarea id="editMessageContent"
                      name="editMessageContent"></textarea>

            <div class="button-container"
                 style='display: flex; flex-direction: row; justify-content: center; gap: 10px;'>
                <button onclick="submitEditFrequentMessage()"
                        data-template-id=""
                        id="editSubmitButton">수정하기</button>

                <button onclick="closeEditFrequentMessage()">취소하기</button>
            </div>
        </div>
    </div>

    <!-- JS와 연계 -->
    <script src="/js/common.js"></script>
    <script src="/js/index_test.js"></script>
</body>
</html>